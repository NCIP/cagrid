<?xml version="1.0"?>

<!-- ===================================================================

Notes:
   This is a build file for use with the Jakarta Ant build tool.

Prerequisites:

   jakarta-ant from http://jakarta.apache.org


Build Instructions:

   This file is automatically called at the end of the deployment
   of the corresponding component's gar (see build-packages.xml).

Copyright:
Copyright (c) 1999 University of Chicago and The University of
Southern California. All Rights Reserved.

==================================================================== -->
<project default="all" basedir=".">

    <property environment="env"/>
    
    <property file="build.properties"/>
    <property file="${user.home}/build.properties"/>
    
    <property name="env.GLOBUS_LOCATION" value="."/>
    <property name="deploy.dir" location="${env.GLOBUS_LOCATION}"/>
    <property name="abs.deploy.dir" location="${deploy.dir}"/>
    <property name="build.launcher" 
        location="${abs.deploy.dir}/share/globus_wsrf_common/build-launcher.xml"/>

    <target name="setup">        
        <copy file="${abs.deploy.dir}/lib/xalan.jar" 
              todir="${abs.deploy.dir}/endorsed"
              failonerror="false"/>
        <chmod file="${abs.deploy.dir}/endorsed/xalan.jar" perm="644"/>
        <chmod dir="${abs.deploy.dir}/endorsed" perm="755"/>

        <move todir="${abs.deploy.dir}/etc"
              failonerror="false">
              <fileset dir="${abs.deploy.dir}/etc/${gar.id}">
                 <include name="globus-devel-*"/>
              </fileset>
        </move>

        <ant antfile="${build.launcher}" 
             target="generateLauncher">
            <property name="launcher-name" value="grid-proxy-init"/>
            <property name="class.name" value="org.globus.tools.ProxyInit"/>
            <property name="windowsOnly" value="true"/>
        </ant>
        
        <ant antfile="${build.launcher}" 
             target="generateLauncher">
            <property name="launcher-name" value="grid-proxy-info"/>
            <property name="class.name" value="org.globus.tools.ProxyInfo"/>
            <property name="windowsOnly" value="true"/>
        </ant>

        <ant antfile="${build.launcher}" 
             target="generateLauncher">
            <property name="launcher-name" value="grid-proxy-destroy"/>
            <property name="class.name" value="org.globus.tools.ProxyDestroy"/>
            <property name="windowsOnly" value="true"/>
        </ant>

        <ant antfile="${build.launcher}" 
             target="generateLauncher">
            <property name="launcher-name" value="grid-cert-info"/>
            <property name="class.name" value="org.globus.tools.CertInfo"/>
            <property name="windowsOnly" value="true"/>
        </ant>

        <ant antfile="${build.launcher}" 
             target="generateLauncher">
            <property name="launcher-name" value="grid-cert-request"/>
            <property name="class.name" 
                value="org.globus.tools.GridCertRequest"/>
            <property name="windowsOnly" value="true"/>
        </ant>

        <ant antfile="${build.launcher}" 
             target="generateLauncher">
            <property name="launcher-name" value="grid-info-search"/>
            <property name="class.name" 
                value="org.globus.tools.GridInfoSearch"/>
            <property name="windowsOnly" value="true"/>
        </ant>

        <ant antfile="${build.launcher}" 
             target="generateLauncher">
            <property name="launcher-name" value="globusrun"/>
            <property name="class.name" value="org.globus.tools.GlobusRun"/>
            <property name="windowsOnly" value="true"/>
        </ant>

        <ant antfile="${build.launcher}" 
             target="generateLauncher">
            <property name="launcher-name" value="globus-url-copy"/>
            <property name="class.name" 
                value="org.globus.tools.GlobusUrlCopy"/>
            <property name="windowsOnly" value="true"/>
        </ant>

        <ant antfile="${build.launcher}" 
             target="generateLauncher">
            <property name="launcher-name" value="globus-gass-server"/>
            <property name="class.name" value="org.globus.tools.GassServer"/>
            <property name="windowsOnly" value="true"/>
        </ant>

        <ant antfile="${build.launcher}" 
             target="generateLauncher">
            <property name="launcher-name" 
                value="globus-gass-server-shutdown"/>
            <property name="class.name" 
                value="org.globus.tools.GassServerShutdown"/>
            <property name="windowsOnly" value="true"/>
        </ant>

        <ant antfile="${build.launcher}" 
             target="generateLauncher">
            <property name="launcher-name" value="grid-change-pass-phrase"/>
            <property name="class.name" 
                value="org.globus.tools.ChangePassPhrase"/>
            <property name="windowsOnly" value="true"/>
        </ant>

        <ant antfile="${build.launcher}" 
             target="generateLauncher">
            <property name="launcher-name" value="globus2jks"/>
            <property name="class.name" 
                value="org.globus.tools.KeyStoreConvert"/>
        </ant>

        <ant antfile="${build.launcher}" 
             target="generateLauncher">
            <property name="launcher-name" value="visual-grid-proxy-init"/>
            <property name="class.name" 
                value="org.globus.tools.proxy.GridProxyInit"/>
            <property name="windowsOnly" value="true"/>
        </ant>

        <ant antfile="${build.launcher}" 
             target="generateAntLauncher">
            <property name="launcher-name" value="globus-deploy-gar"/>
            <property name="class.name" 
                value="org.globus.tools.gar.DeployGar"/>
        </ant>

        <ant antfile="${build.launcher}" 
             target="generateAntLauncher">
            <property name="launcher-name" value="globus-undeploy-gar"/>
            <property name="class.name" 
                value="-glfilter wsrf_common.jar org.globus.tools.gar.UndeployGar"/>
        </ant>

    </target>

</project>
