<dataConfig>
    <dataSource driver="com.mysql.jdbc.Driver" url="@cagrid.portal.db.url@"
                user="@cagrid.portal.db.username@" password="@cagrid.portal.db.password@"/>

    <document name="CatalogEntry">


        <entity name="AllCatalogs"
                query="select * from cat_entry"
                deltaQuery="select id from cat_entry where where updatedAt > '${dataimporter.last_index_time}'">
            <field column="id" name="id"/>
            <field column="catalog_type" name="catalog_type"/>
            <field column="name" name="catalogName"/>
            <field column="firstName" name="firstName"/>
            <field column="lastName" name="lastName"/>
            <field column="description" name="description"/>
            <field column="street1" name="street1"/>
            <field column="locality" name="locality"/>
            <field column="stateProvince" name="stateProvince"/>
            <field column="country" name="country"/>
            <field column="homepageUrl" name="homepageUrl"/>
            <field column="phoneNumber" name="phoneNumber"/>
            <field column="updatedAt" name="updatedAt"/>

             <!--<entity name="Hyperlink"-->
                    <!--query="select * from cat_hyperlinks where catalog_id='${AllCatalogs.id}'">-->
                <!--<field name="homepageUrl" column="url"/>-->
            <!--</entity>-->
            <entity name="GridService"
                    query="select * from grid_services where id='${AllCatalogs.grid_service_id}'">
                <field name="endpoint" column="url"/>
            </entity>
            <entity name="cat_entry_terms"
                    query="select term_id from cat_entry_terms where entry_id='${AllCatalogs.id}'">
                <entity name="term"
                        query="select * from cat_terms where id='${cat_entry_terms.term_id}'">
                    <field name="term_description" column="description"/>
                    <field name="term_identifier" column="identifier"/>
                    <field name="term_label" column="label"/>
                </entity>
            </entity>
        </entity>


    </document>

</dataConfig>
